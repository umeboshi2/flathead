webpackJsonp([5],{"7IBN":function(t,e,r){var o,n,u,i,s,a,p,c,l,f,h=function(t,e){function r(){this.constructor=t}for(var o in e)y.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;l=r("2mEY"),p=r("SiCa"),i=r("GXmR").MainController,s=r("iuxk").ToolbarAppletLayout,u=Backbone.Radio.channel("global"),Backbone.Radio.channel("messages"),o=Backbone.Radio.channel("userprofile"),c=new Backbone.Model({entries:[{name:"Profile",url:"#profile"},{name:"Map",url:"#profile/mapview"},{name:"Settings",url:"#profile/editconfig"},{name:"Change Password",url:"#profile/chpassword"}]}),f=l.renderable(function(t){return l.div(".btn-group.btn-group-justified",function(){var e,r,o,n,u,i;for(u=t.entries,i=[],r=0,n=u.length;r<n;r++)e=u[r],o=(null!=e?e.icon:void 0)||"info",i.push(l.div(".toolbar-button.btn.btn-default",{"button-url":e.url},function(){return l.span(".fa.fa-"+o," "+e.name)}));return i})}),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.template=f,e.prototype.ui={toolbarButton:".toolbar-button"},e.prototype.events={"click @ui.toolbarButton":"toolbarButtonPressed"},e.prototype.toolbarButtonPressed=function(t){var e;return console.log("toolbarButtonPressed",t),e=t.currentTarget.getAttribute("button-url"),p(e)},e}(Backbone.Marionette.View),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return h(e,t),e.prototype.layoutClass=s,e.prototype.setup_layout_if_needed=function(){var t;return e.__super__.setup_layout_if_needed.call(this),t=new a({model:c}),this.layout.showChildView("toolbar",t)},e.prototype.show_profile=function(){return this.setup_layout_if_needed(),r.e(27).then(function(t){return function(){var e,o,n;return e=r("QeTo"),o=u.request("current-user"),n=new e({model:o}),t.layout.showChildView("content",n)}}(this).bind(null,r)).catch(r.oe)},e.prototype.view_map=function(){return this.setup_layout_if_needed(),r.e(23).then(function(t){return function(){var e,o,n;return e=r("vf65"),o=u.request("current-user"),n=new e({model:o}),t._show_content(n)}}(this).bind(null,r)).catch(r.oe)},e.prototype.edit_config=function(){return this.setup_layout_if_needed(),r.e(11).then(function(t){return function(){var e,o,n;return e=r("qqlL"),o=u.request("current-user"),n=new e({model:o}),t.layout.showChildView("content",n)}}(this).bind(null,r)).catch(r.oe)},e.prototype.change_password=function(){return this.setup_layout_if_needed(),r.e(13).then(function(t){return function(){var e,n;return e=r("xSzf"),n=new e({model:o.request("new-password-model")}),t.layout.showChildView("content",n)}}(this).bind(null,r)).catch(r.oe)},e}(i),t.exports=n},"9w6x":function(t,e){t.exports=function(){return window.scrollTo(0,0)}},EarI:function(t,e){function r(t){if(t=String(t),!(t.length>100)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*c;case"days":case"day":case"d":return r*p;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*s;case"seconds":case"second":case"secs":case"sec":case"s":return r*i;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o(t){return t>=p?Math.round(t/p)+"d":t>=a?Math.round(t/a)+"h":t>=s?Math.round(t/s)+"m":t>=i?Math.round(t/i)+"s":t+"ms"}function n(t){return u(t,p,"day")||u(t,a,"hour")||u(t,s,"minute")||u(t,i,"second")||t+" ms"}function u(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var i=1e3,s=60*i,a=60*s,p=24*a,c=365.25*p;t.exports=function(t,e){e=e||{};var u=typeof t;if("string"===u&&t.length>0)return r(t);if("number"===u&&!1===isNaN(t))return e.long?n(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},GXmR:function(t,e,r){var o,n,u,i,s,a,p,c,l,f=function(t,e){function r(){this.constructor=t}for(var o in e)h.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},h={}.hasOwnProperty;r("4kSj"),o=r("aGLy"),p=r("y11e"),u=r("iuxk").DefaultAppletLayout,c=r("SiCa"),l=r("9w6x"),s=o.Radio.channel("global"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.init_page=function(){},e.prototype.scroll_top=l,e.prototype.navigate_to_url=c,e}(p.Object),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.layoutClass=u,e.prototype._get_applet=function(){var t;return t=s.request("main:app:object"),t.getView().getRegion("applet")},e.prototype.setup_layout=function(){var t;return this.layout=new this.layoutClass,t=this._get_applet(),t.hasView()&&t.empty(),t.show(this.layout)},e.prototype.setup_layout_if_needed=function(){return void 0===this.layout?this.setup_layout():this.layout.isDestroyed()?this.setup_layout():void 0},e.prototype._get_region=function(t){return this.layout.getRegion(t)},e.prototype._show_view=function(t,e){var r;return r=new t({model:e}),this.layout.showChildView("content",r)},e.prototype._load_view=function(t,e,r){var o;return e.isEmpty()||1===Object.keys(e.attributes).length?(o=e.fetch(),o.done(function(r){return function(){return r._show_view(t,e)}}(this)),o.fail(function(){var t;return t="Failed to load "+r+" data.",MessageChannel.request("danger",t)})):this._show_view(t,e)},e}(n),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return f(e,t),e.prototype.channelName=function(){return this.getOption("channelName")||"global"},e.prototype.initialize=function(t){return this.appletName=t.appletName,this.applet=s.request("main:applet:get-applet",this.appletName),this.mainController=this.applet.router.controller,this.channel=this.getChannel()},e.prototype.setup_layout_if_needed=function(){return this.mainController.setup_layout_if_needed()},e.prototype.showChildView=function(t,e){return this.mainController.layout.showChildView(t,e)},e}(n),t.exports={BaseController:n,MainController:a,ExtraController:i}},SiCa:function(t,e,r){var o;o=r("aGLy"),t.exports=function(t){var e;return""===t.split("/")[0]?window.location=t:(e=new o.Router,e.navigate(t,{trigger:!0}))}},"URa/":function(t,e,r){var o,n,u,i,s,a,p=function(t,e){function r(){this.constructor=t}for(var o in e)c.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},c={}.hasOwnProperty;o=r("aGLy"),u=o.Radio.channel("global"),i=o.Radio.channel("messages"),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e}(o.Model),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return p(e,t),e}(s),a=function(t){var e;return e=new n,e.url=t,e},u.reply("create-current-user-object",function(t){var e;return e=a(t),u.reply("current-user",function(){return e}),u.reply("update-user-config",function(t){var r;return e.set("config",t),r=e.save(),r.done(function(){return e}),r.fail(function(){return i.request("danger","failed to update user config!")})}),e}),t.exports={User:s,CurrentUser:n}},"Uy6/":function(t,e,r){var o,n,u,i,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;s=r("y11e"),p=r("agle"),r("X7AR"),u=r("7IBN"),i=Backbone.Radio.channel("global"),o=Backbone.Radio.channel("userprofile"),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.appRoutes={profile:"show_profile","profile/editconfig":"edit_config","profile/chpassword":"change_password","profile/mapview":"view_map"},e}(s.AppRouter),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.Controller=u,e.prototype.Router=a,e.prototype.onBeforeStart=function(){return e.__super__.onBeforeStart.call(this,arguments),i.reply("applet:annex:router",function(t){return function(){return t.router}}(this)),i.reply("applet:annex:controller",function(t){return function(){return t.router.controller}}(this)),o.reply("main-controller",function(t){return function(){return console.warn("Stop using 'main-controller' request on AppChannel"),t.router.controller}}(this))},e}(p),i.reply("applet:userprofile:route",function(){var t;return t=new u(i),new a({controller:t})}),t.exports=n},X7AR:function(t,e,r){var o,n,u,i,s,a,p,c=function(t,e){function r(){this.constructor=t}for(var o in e)l.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=r("4kSj"),r("rdLu"),i=r("aGLy"),r("y11e"),p=r("URa/"),p.User,p.CurrentUser,s=i.Radio.channel("global"),i.Radio.channel("messages"),n=i.Radio.channel("userprofile"),n.reply("update-user-config",function(){return console.log("update-user-config called")}),u=s.request("main:app:AuthModel"),s.request("main:app:AuthCollection"),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return c(e,t),e.prototype.url="/auth/chpass",e.prototype.validation={password:{required:!0,minLength:8},confirm:function(t){var e,r;return r=o('input[name="password"]'),e=r.val(),t===e&&o('input[type="submit"]').show(),t!==e}},e}(u),n.reply("new-password-model",function(){return new a}),t.exports={}},Zu8L:function(t,e,r){var o,n,u,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=r("aGLy"),r("y11e"),o.Radio.channel("global"),n=r("l9Gg"),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.onDomRefresh=function(){var t;return t=new n,this.view.showChildView("content",t)},e}(o.Marionette.Behavior),t.exports=u},agle:function(t,e,r){var o,n,u=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty,s=[].indexOf||function(t){for(var e=0,r=this.length;e<r;e++)if(e in this&&this[e]===t)return e;return-1};r("y11e"),n=r("HWfR"),Backbone.Radio.channel("global"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.onBeforeStart=function(){var t,e,r,o,n;return e=new this.Controller,e.applet=this,this.router=new this.Router({controller:e}),(null!=this?this.appRoutes:void 0)&&(t=("function"==typeof this.appRoutes?this.appRoutes():void 0)||this.appRoutes,Object.keys(t).forEach(function(e){return function(r){return e.router.appRoute(r,t[r])}}(this))),(null!=(o=this.options)?o.isFrontdoorApplet:void 0)&&(r=(null!=(n=this.options.appConfig)?n.startFrontdoorMethod:void 0)||"start",s.call(Object.keys(this.router.appRoutes),"")<0&&this.router.appRoute("",r)),this._extraRouters={},this.initExtraRouters()},e.prototype.onStop=function(){},e.prototype.setExtraRouter=function(t,e,r){var o,n;return o=new r,n=new e({controller:o}),this._extraRouters[t]=n},e.prototype.initExtraRouters=function(){var t,e,r,o;t=this.getOption("extraRouters"),this.getOption("extraRouters"),e=[];for(o in t)r=t[o],console.log("rtr",o,r),this.setExtraRouter(o,r.router,r.controller),e.push(void 0);return e},e.prototype.getExtraRouter=function(t){return this._extraRouters[t]},e}(n.App),t.exports=o},iuxk:function(t,e,r){var o,n,u,i,s,a,p,c,l=function(t,e){function r(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=r("aGLy"),r("y11e"),c=r("2mEY"),p=r("EarI"),n=r("Zu8L"),i=r("yk0R"),a=function(t,e,r){return null==t&&(t=3),null==e&&(e="sm"),null==r&&(r="left"),c.renderable(function(){if("left"===r&&c.div("#sidebar.col-"+e+"-"+t+".left-column"),c.div("#main-content.col-"+e+"-"+(12-t)),"right"===r)return c.div("#sidebar.col-"+e+"-"+t+".right-column")})},u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template=a(),e.prototype.regions={sidebar:"#sidebar",content:"#main-content"},e}(o.Marionette.View),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.behaviors={ShowInitialEmptyContent:{behaviorClass:n}},e.prototype.template=c.renderable(function(){return c.div(".col-sm-12",function(){return c.div(".row",function(){return c.div("#main-toolbar.col-sm-8.col-sm-offset-2")}),c.div(".row",function(){return c.div("#main-content.col-sm-10.col-sm-offset-1")})})}),e.prototype.regions=function(){var t;return t=new i({el:"#main-content"}),t.slide_speed=p(".01s"),{content:t,toolbar:"#main-toolbar"}},e}(o.Marionette.View),t.exports={SidebarAppletLayout:u,ToolbarAppletLayout:s}},l9Gg:function(t,e,r){var o,n,u,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;o=r("aGLy"),r("y11e"),u=r("2mEY"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.template=u.renderable(function(){return u.div(".jumbotron",function(){return u.h1(function(){return u.text("Loading ..."),u.i(".fa.fa-spinner.fa-spin")})})}),e}(o.Marionette.View),t.exports=n},yk0R:function(t,e,r){var o,n,u=function(t,e){function r(){this.constructor=t}for(var o in e)i.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},i={}.hasOwnProperty;r("4kSj"),o=r("y11e"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return u(e,t),e.prototype.attachHtml=function(t){var e;return e=this.slide_speed?this.slide_speed:"fast",this.$el.hide(),this.$el.html(t.el),this.$el.slideDown(e)},e}(o.Region),t.exports=n}});