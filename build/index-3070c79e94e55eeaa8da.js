webpackJsonp([7],{"2clo":function(e,t,r){var n,o,a,s,i,u,l,c,p,d,f=function(e,t){function r(){this.constructor=e}for(var n in t)h.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},h={}.hasOwnProperty;s=r("aGLy"),r("SiCa"),c=r("ytdl"),i=s.Radio.channel("global"),u=s.Radio.channel("messages"),p=function(){return"Bearer "+localStorage.getItem("auth_token")},d=function(e){return e.setRequestHeader("Authorization",p())},i.reply("main:app:authBeforeSend",function(){return d}),l=function(e){return e=e||{},e.beforeSend=d,e},o=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.sync=function(e,r,n){return n=l(n),t.__super__.sync.call(this,e,r,n)},t}(s.Model),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.sync=function(e,r,n){return n=l(n),t.__super__.sync.call(this,e,r,n)},t}(s.Collection),i.reply("main:app:AuthModel",function(){return o}),i.reply("main:app:AuthCollection",function(){return n}),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return f(t,e),t.prototype.url="/auth/refresh",t}(o),i.reply("main:app:AuthRefresh",function(){return a}),i.reply("main:app:refresh-token",function(){var e,t;return e=new a,t=e.fetch(),t.fail(function(){var e;return 401===t.status?window.location.hash="#frontdoor/login":(e="There was a problem refreshing the access token",u.request("warning",e))}),t.done(function(){var t;return t=e.get("token"),c(t),localStorage.setItem("auth_token",t)})}),i.reply("main:app:set-auth-token",function(e){return localStorage.setItem("auth_token",e)}),i.reply("main:app:decode-auth-token",function(){var e;return e=localStorage.getItem("auth_token"),e?c(e):{}}),i.reply("current-user",function(){var e;return e=i.request("main:app:decode-auth-token"),e?new s.Model(e):null}),i.reply("main:app:destroy-auth-token",function(){return localStorage.removeItem("auth_token")}),e.exports={}},"4svf":function(e,t,r){var n,o,a,s,i,u,l,c,p,d,f,h,m,b,g,y,v,w,k,_,x=function(e,t){function r(){this.constructor=e}for(var n in t)q.call(t,n)&&(e[n]=t[n]);return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e},q={}.hasOwnProperty;o=r("aGLy"),u=r("y11e"),_=r("2mEY"),r("ytdl"),h=r("EarI"),r("SiCa"),c=r("X484"),r("qYnM"),b=r("7YgM"),g=new o.Model(b),s=r("H97n"),i=o.Radio.channel("global"),l=o.Radio.channel("messages"),a=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return x(t,e),t.prototype.template=_.renderable(function(e){return".col-sm-2.col-sm-offset-10",".col-sm-2.col-sm-offset-1",_.div(".col-sm-10.col-sm-offset-1",function(){return _.table(".table",function(){return _.tr(function(){var t,r;return e.remaining>=0?(r=86400,t=Math.floor(e.remaining/r),_.td(t+" days left for "+e.token.name)):_.td("Time expired for "+e.token.name),_.td("Version: "+e.version)})})})}),t}(u.View),m=function(e){var t;return t=new Date,new Date(1e3*e.exp)-t},p=function(){var e,t;return(t=i.request("main:app:decode-auth-token"))?(e=m(t),Math.floor(e/1e3)):0},k=function(){var e,t,r;return t=i.request("main:app:decode-auth-token"),g.set("token",t),g.set("remaining",p()),r=new a({model:g}),e=d.getView().getRegion("footer"),e.show(r)},f=function(){var e,t,r,n,o,a;if(a=i.request("main:app:decode-auth-token"),o=m(a),t=h(s.authToken.refreshInterval),r=s.authToken.refreshIntervalMultiple,e=1e3*(a.exp-a.iat),n=e-r*t,o<n)return i.request("main:app:refresh-token")},d=new c({appConfig:s}),i.request("main:app:route"),d.on("before:start",function(){var e;return e=i.request("main:app:get-theme"),e=e||"vanilla",i.request("main:app:switch-theme",e)}),d.on("start",function(){return k(),setInterval(k,h("5s")),setInterval(f,h("10s"))}),v=p(),v<=0&&i.request("main:app:decode-auth-token")&&(l.request("warning","deleting expired access token"),i.request("main:app:destroy-auth-token")),n=i.request("main:app:AuthRefresh"),y=new n,w=y.fetch(),w.fail(function(){return 401===w.status&&(i.request("main:app:destroy-auth-token"),s.needLogin&&(window.location.hash="#frontdoor/login")),d.start({state:{currentUser:null}})}),w.done(function(){var e;return e=y.get("token"),i.request("main:app:set-auth-token",e),d.start({state:{currentUser:i.request("main:app:decode-auth-token")}})}),e.exports=d},"7YgM":function(e,t){e.exports={name:"flathead",version:"0.0.30",description:"web app...",main:"start.js",scripts:{start:"node server.js",test:'echo "Error: no test specified" && exit 1'},repository:{type:"git",url:"git+https://github.com/umeboshi2/flathead.git"},keywords:["comics","ebay"],author:"Joseph Rawson",license:"UNLICENSED",bugs:{url:"https://github.com/umeboshi2/flathead/issues"},homepage:"https://github.com/umeboshi2/flathead#readme",devDependencies:{"amd-define-factory-patcher-loader":"^1.0.0","applet-bumblr":"github:umeboshi2/applet-bumblr",backbone:"^1.3.3","backbone-validation":"^0.11.5","backbone.marionette":"^3.3.1","backbone.paginator":"^2.0.6","backbone.radio":"^2.0.0",bootstrap:"^3.3.7","bootstrap-fileinput":"^4.4.1",brace:"^0.10.0","chunk-manifest-webpack-plugin":"^1.1.0","clean-webpack-plugin":"^0.1.16","coffee-loader":"^0.7.3","compression-webpack-plugin":"^0.4.0","css-loader":"^0.28.4",dateformat:"^2.0.0",eslint:"^4.0.0","eslint-plugin-jsx-a11y":"^5.0.3","eslint-plugin-react":"^7.1.0","exports-loader":"^0.6.4","expose-loader":"^0.7.3","extract-text-webpack-plugin":"^2.1.2","file-loader":"^0.11.2",fullcalendar:"^3.4.0",gulp:"^3.9.1","gulp-coffee":"^2.3.4","gulp-compass":"^2.1.0","gulp-concat":"^2.6.1","gulp-nodemon":"^2.2.1","gulp-size":"^2.1.0","gulp-sourcemaps":"^2.6.0","gulp-uglify":"^3.0.0","gulp-util":"^3.0.8",handlebars:"^4.0.10",imagesloaded:"^4.1.3","imports-loader":"^0.7.1",jquery:"^3.2.1","jquery-ui":"^1.12.1","jquery.json-viewer":"^1.1.0","jwt-decode":"^2.2.0",leaflet:"^1.0.3",lovefield:"^2.1.12","marionette.toolkit":"^4.0.0",marked:"^0.3.6","masonry-layout":"^4.2.0",minimist:"^1.2.0","raw-loader":"^0.5.1","resolve-url-loader":"^2.0.3","sass-loader":"^6.0.6",shelljs:"^0.7.8","stats-webpack-plugin":"^0.6.0","style-loader":"^0.18.2",tbirds:"^0.3.13","url-loader":"^0.5.9",webpack:"^2.6.1","webpack-dev-middleware":"^1.10.2","webpack-dev-server":"^2.4.5","webpack-manifest-plugin":"^1.1.0","xml2js-parseonly":"github:umeboshi2/node-xml2js"},dependencies:{bcryptjs:"^2.4.3",bluebird:"^3.5.0","body-parser":"^1.17.2",bookshelf:"^0.10.3","bookshelf-api":"github:umeboshi2/bookshelf-api","bookshelf-bcrypt":"github:umeboshi2/bookshelf-bcrypt","bookshelf-json-columns":"^2.1.0","coffee-script":"^1.12.6","connect-gzip-static":"^2.0.1","cookie-parser":"^1.4.3",cors:"^2.8.3",express:"^4.15.3","express-http-proxy":"^1.0.3","express-https-redirect":"^1.0.0","express-jwt":"^5.3.0","express-session":"^1.15.3","grant-express":"^3.8.0","js-beautify":"^1.6.14","json-view":"^0.4.0",jsonwebtoken:"^7.4.1",knex:"^0.13.0","lodash.merge":"^4.6.0",morgan:"^1.8.2",ms:"^2.0.0",multer:"^1.3.0","node-gyp":"^3.6.2","node-pre-gyp":"^0.6.36",papaparse:"^4.3.3",pg:"^6.2.4",qs:"^6.4.0",request:"^2.81.0","serve-favicon":"^2.4.3",sqlite3:"^3.1.8",teacup:"^2.0.0",underscore:"^1.8.3"}}},EarI:function(e,t){function r(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*c;case"days":case"day":case"d":return r*l;case"hours":case"hour":case"hrs":case"hr":case"h":return r*u;case"minutes":case"minute":case"mins":case"min":case"m":return r*i;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function n(e){return e>=l?Math.round(e/l)+"d":e>=u?Math.round(e/u)+"h":e>=i?Math.round(e/i)+"m":e>=s?Math.round(e/s)+"s":e+"ms"}function o(e){return a(e,l,"day")||a(e,u,"hour")||a(e,i,"minute")||a(e,s,"second")||e+" ms"}function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}var s=1e3,i=60*s,u=60*i,l=24*u,c=365.25*l;e.exports=function(e,t){t=t||{};var a=typeof e;if("string"===a&&e.length>0)return r(e);if("number"===a&&!1===isNaN(e))return t.long?o(e):n(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},H97n:function(e,t,r){var n,o,a;n=r("qF/v"),n.userMenuApp=r("TN+8"),n.hasUser=!0,n.appletRoutes.profile="userprofile",n.brand.label="Flathead",n.brand.url="#",n.authToken={},n.authToken.refreshInterval="5m",n.authToken.refreshIntervalMultiple=3,a={label:"Misc Applets",menu:[{label:"Themes",url:"#frontdoor/themes"},{label:"Ebcsv",url:"#ebcsv",needUser:!0},{label:"Bumblr",url:"#bumblr"},{label:"Hubby",url:"#hubby"}]},o={needUser:!0,label:"Ebcsv",menu:[{label:"Main View",url:"#ebcsv"},{label:"List Configs",url:"#ebcsv/cfg/list"},{label:"List Descriptions",url:"#ebcsv/dsc/list"},{label:"Upload Comic XML",url:"#ebcsv/xml/upload"},{label:"Create CSV",url:"#ebcsv/csv/create"},{label:"Create New Config",url:"#ebcsv/cfg/add"}]},n.navbarEntries=[o,{label:"Todos",url:"#todos",needUser:!0},a],e.exports=n},SiCa:function(e,t,r){var n;n=r("aGLy"),e.exports=function(e){var t;return""===e.split("/")[0]?window.location=e:(t=new n.Router,t.navigate(e,{trigger:!0}))}},nwNo:function(e,t){function r(e){this.message=e}function n(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new r("'atob' failed: The string to be decoded is not correctly encoded.");for(var n,a,s=0,i=0,u="";a=t.charAt(i++);~a&&(n=s%4?64*n+a:a,s++%4)?u+=String.fromCharCode(255&n>>(-2*s&6)):0)a=o.indexOf(a);return u}var o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.prototype=new Error,r.prototype.name="InvalidCharacterError",e.exports="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||n},ozX0:function(e,t,r){function n(e){return decodeURIComponent(o(e).replace(/(.)/g,function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}var o=r("nwNo");e.exports=function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return n(t)}catch(e){return o(t)}}},qYnM:function(e,t,r){var n,o,a;n=r("4kSj"),o=r("aGLy"),r("gNGx"),r("IS1s"),r("2clo"),a=o.Radio.channel("global"),o.Radio.channel("messages"),a.reply("main:app:switch-theme",function(e){var t,r;return t="assets/stylesheets/bootstrap-"+e+".css",r=n('head link[href^="assets/stylesheets/bootstrap-"]'),r.attr("href",t)}),a.reply("main:app:set-theme",function(e){return localStorage.setItem("main-theme",e)}),a.reply("main:app:get-theme",function(){return localStorage.getItem("main-theme")}),e.exports={}},ytdl:function(e,t,r){"use strict";function n(e){this.message=e}var o=r("ozX0");n.prototype=new Error,n.prototype.name="InvalidTokenError",e.exports=function(e,t){if("string"!=typeof e)throw new n("Invalid token specified");t=t||{};var r=!0===t.header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new n("Invalid token specified: "+e.message)}},e.exports.InvalidTokenError=n}},["4svf"]);