webpackJsonp([4],{"9w6x":function(t,e){t.exports=function(){return window.scrollTo(0,0)}},DWMm:function(t,e){t.exports=function(t){return t.charAt(0).toUpperCase()+t.slice(1)}},EarI:function(t,e){function r(t){if(t=String(t),!(t.length>1e4)){var e=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]);switch((e[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return r*p;case"days":case"day":case"d":return r*c;case"hours":case"hour":case"hrs":case"hr":case"h":return r*a;case"minutes":case"minute":case"mins":case"min":case"m":return r*u;case"seconds":case"second":case"secs":case"sec":case"s":return r*s;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function o(t){return t>=c?Math.round(t/c)+"d":t>=a?Math.round(t/a)+"h":t>=u?Math.round(t/u)+"m":t>=s?Math.round(t/s)+"s":t+"ms"}function n(t){return i(t,c,"day")||i(t,a,"hour")||i(t,u,"minute")||i(t,s,"second")||t+" ms"}function i(t,e,r){if(!(t<e))return t<1.5*e?Math.floor(t/e)+" "+r:Math.ceil(t/e)+" "+r+"s"}var s=1e3,u=60*s,a=60*u,c=24*a,p=365.25*c;t.exports=function(t,e){e=e||{};var i=typeof t;if("string"===i&&t.length>0)return r(t);if("number"===i&&!1===isNaN(t))return e.long?n(t):o(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},GXmR:function(t,e,r){var o,n,i,s,u,a,c,p,l=function(t,e){function r(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;r("4kSj"),o=r("aGLy"),r("y11e"),i=r("iuxk").DefaultAppletLayout,a=r("NOnk").navbar_set_active,c=r("SiCa"),p=r("9w6x"),s=o.Radio.channel("global"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.init_page=function(){},e.prototype.scroll_top=p,e.prototype.navigate_to_url=c,e.prototype.navbar_set_active=a,e}(o.Marionette.Object),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.layoutClass=i,e.prototype._get_applet=function(){var t;return t=s.request("main:app:object"),t.getView().getRegion("applet")},e.prototype.setup_layout=function(){var t;return this.layout=new this.layoutClass,t=this._get_applet(),t.hasView()&&t.empty(),t.show(this.layout)},e.prototype.setup_layout_if_needed=function(){return void 0===this.layout?this.setup_layout():this.layout.isDestroyed()?this.setup_layout():void 0},e.prototype._get_region=function(t){return this.layout.getRegion(t)},e.prototype._show_content=function(t){var e;return console.warn("_show_content is deprecated"),e=this._get_region("content"),e.show(t)},e.prototype._empty_sidebar=function(){var t;return t=this._get_region("sidebar"),t.empty(),t},e.prototype._make_sidebar=function(){var t,e;return console.warn("_make_sidebar is deprecated"),t=this._empty_sidebar(),e=new this.sidebarclass({model:this.sidebar_model}),t.show(e)},e.prototype._show_view=function(t,e){var r;return r=new t({model:e}),this.layout.showChildView("content",r)},e.prototype._load_view=function(t,e,r){var o;return e.isEmpty()||1===Object.keys(e.attributes).length?(o=e.fetch(),o.done(function(r){return function(){return r._show_view(t,e)}}(this)),o.fail(function(t){return function(){var t;return t="Failed to load "+r+" data.",MessageChannel.request("danger",t)}}())):this._show_view(t,e)},e}(n),t.exports={BaseController:n,MainController:u}},JhqC:function(t,e,r){var o=r("knBT");t.exports=function(e,r){if(!e||!r)throw new Error("Backbone and/or Lodash (or Underscore) are not loaded...");return o=o(r),e.JsonApiCollection=e.Collection.extend({parse:function(t){if(void 0!==t){var e=o.parse(t),n=o.getMainCollection(t);return r.each(e[n],function(t){t._alreadyBBJSONAPIParsed=!0})}}}),e.JsonApiModel=e.Model.extend({parse:function(t){if(void 0!==t){if(t._alreadyBBJSONAPIParsed)return delete t._alreadyBBJSONAPIParsed,t;return o.parse(t)[o.getMainCollection(t)][0]}}}),t.exports},t.exports.VERSION="0.1.6"},NOnk:function(t,e,r){var o,n,i,s;o=r("4kSj"),r("aGLy"),n=function(t,e,r){var o;return o=new r,t.reply("main-controller",function(){return o}),new e({controller:o})},i=function(t,e){return t.reply("get-navbar-color",function(){var t;return t=o(e),t.css("color")}),t.reply("get-navbar-bg-color",function(){var t;return t=o(e),t.css("background-color")})},s=function(t){var e,r,n,i,s,u,a;for(s=t.split("/")[0],u=o("#navbar-view li"),a=[],e=0,r=u.length;e<r;e++)n=u[e],i=o(n),i.removeClass("active"),s===i.attr("appname")?a.push(i.addClass("active")):a.push(void 0);return a},t.exports={create_new_approuter:n,navbar_color_handlers:i,navbar_set_active:s}},SiCa:function(t,e,r){var o;o=r("aGLy"),t.exports=function(t){var e;return""===t.split("/")[0]?window.location=t:(e=new o.Router,e.navigate(t,{trigger:!0}))}},Zu8L:function(t,e,r){var o,n,i,s=function(t,e){function r(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=r("aGLy"),r("y11e"),o.Radio.channel("global"),n=r("l9Gg"),i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.onDomRefresh=function(){var t;return t=new n,this.view.showChildView("content",t)},e}(o.Marionette.Behavior),t.exports=i},agle:function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;r("y11e"),n=r("HWfR"),Backbone.Radio.channel("global"),o=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.onBeforeStart=function(){var t,e;if(e=new this.Controller,e.applet=this,this.router=new this.Router({controller:e}),null!=this?this.appRoutes:void 0)return t=("function"==typeof this.appRoutes?this.appRoutes():void 0)||this.appRoutes,Object.keys(t).forEach(function(e){return function(r){return e.router.appRoute(r,t[r])}}(this))},e.prototype.onStop=function(){return console.log("Stopping TkApplet",this.isRunning())},e}(n.App),t.exports=o},iuxk:function(t,e,r){var o,n,i,s,u,a,c,p,l=function(t,e){function r(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;o=r("aGLy"),r("y11e"),p=r("2mEY"),c=r("EarI"),n=r("Zu8L"),s=r("yk0R"),a=function(t,e,r){return null==t&&(t=3),null==e&&(e="sm"),null==r&&(r="left"),p.renderable(function(){if("left"===r&&p.div("#sidebar.col-"+e+"-"+t+".left-column"),p.div("#main-content.col-"+e+"-"+(12-t)),"right"===r)return p.div("#sidebar.col-"+e+"-"+t+".right-column")})},i=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.template=a(),e.prototype.regions={sidebar:"#sidebar",content:"#main-content"},e}(o.Marionette.View),u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.behaviors={ShowInitialEmptyContent:{behaviorClass:n}},e.prototype.template=p.renderable(function(){return p.div(".col-sm-12",function(){return p.div(".row",function(){return p.div("#main-toolbar.col-sm-8.col-sm-offset-2")}),p.div(".row",function(){return p.div("#main-content.col-sm-10.col-sm-offset-1")})})}),e.prototype.regions=function(){var t;return t=new s({el:"#main-content"}),t.slide_speed=c(".01s"),{content:t,toolbar:"#main-toolbar"}},e}(o.Marionette.View),t.exports={SidebarAppletLayout:i,ToolbarAppletLayout:u}},knBT:function(t,e){var r;t.exports=function(e){return r=e,r.forOwn=r.forOwn||function(t,e){var o;try{o=r.keys(t)}catch(t){return}r.each(o,function(r){e(t[r],r)})},t.exports};var o=t.exports.findById=function(t,e){return r.find(t,function(t){return t.id===e})},n=t.exports.applyTemplateUrl=function(t,e,r){var o=new RegExp("{"+t+"\\.(.+?)}","g"),n=o.exec(e);if(null!==n){if(void 0===r[n[1]]&&void 0===r.links[n[1]])throw new Error("Template required a property not present in data object");e=e.substr(0,n.index)+(r.links[n[1]]||r[n[1]])+e.substr(o.lastIndex)}return e},i=t.exports.processLink=function(t,e,i){var s=i.split("."),u=s[0],a=s[1];return r.each(t[u],function(r){if(r.links=r.links||{},void 0!==r.links[a]){var i=o(t[e.type],r.links[a]);void 0!==i&&(r[a]=i)}try{r.links[a]=n(u,e.href,r)}catch(t){}}),t},s=t.exports.processLinks=function(t,e,i){var s=i.split("."),u=s[0],a=s[1];r.each(t[u],function(e){e.links=e.links||{},void 0!==e.links[a]&&(e[a]||(e[a]=[]),_each(items.links[a],function(r){var n=o(t[linkObj.type],r);void 0!==n&&e[a].push(n)}));try{e.links[a]=n(u,linkObj.href,e)}catch(t){}})};t.exports.parse=function(t){return r.forOwn(t.links,function(e,r){"array"==typeof e?s(t,e,r):i(t,e,r)}),t},t.exports.getMainCollection=function(t){var e=r.without(r.keys(t),"links","meta"),o=r.pluck(r.values(t.links),"type");return r.difference(e,o)[0]}},l9Gg:function(t,e,r){var o,n,i,s=function(t,e){function r(){this.constructor=t}for(var o in e)u.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},u={}.hasOwnProperty;o=r("aGLy"),r("y11e"),i=r("2mEY"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return s(e,t),e.prototype.template=i.renderable(function(){return i.div(".jumbotron",function(){return i.h1(function(){return i.text("Loading ..."),i.i(".fa.fa-spinner.fa-spin")})})}),e}(o.Marionette.View),t.exports=n},lNHU:function(t,e,r){var o,n,i,s,u,a,c,p,l,f,h,d=function(t,e){function r(){this.constructor=t}for(var o in e)y.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},y={}.hasOwnProperty;l=r("2mEY"),i=r("GXmR").MainController,p=r("SiCa"),c=r("DWMm"),Backbone.Radio.channel("global"),s=Backbone.Radio.channel("messages"),o=Backbone.Radio.channel("fantasy"),u=r("iuxk").ToolbarAppletLayout,f=new Backbone.Model({entries:[{name:"Authors",url:"#fantasy/authors",icon:"list"},{name:"Books",url:"#fantasy/books",icon:"list"},{name:"Chapters",url:"#fantasy/chapters",icon:"list"},{name:"Photos",url:"#fantasy/photos",icon:"list"},{name:"Series",url:"#fantasy/series",icon:"list"},{name:"Stores",url:"#fantasy/stores",icon:"list"}]}),h=l.renderable(function(t){return l.div(".btn-group.btn-group-justified",function(){var e,r,o,n,i;for(n=t.entries,i=[],r=0,o=n.length;r<o;r++)e=n[r],i.push(l.div(".toolbar-button.btn.btn-default",{"button-url":e.url},function(){return l.span(".fa.fa-"+e.icon," "+e.name)}));return i})}),a=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.template=h,e.prototype.ui={toolbarButton:".toolbar-button"},e.prototype.events={"click @ui.toolbarButton":"toolbarButtonPressed"},e.prototype.toolbarButtonPressed=function(t){var e;return console.log("toolbarButtonPressed",t),e=t.currentTarget.getAttribute("button-url"),p(e)},e}(Backbone.Marionette.View),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return d(e,t),e.prototype.layoutClass=u,e.prototype.setup_layout_if_needed=function(){var t;return e.__super__.setup_layout_if_needed.call(this),t=new a({model:f}),this.layout.showChildView("toolbar",t)},e.prototype.view_model=function(t){var e;return e=t.collectionName,this.setup_layout_if_needed(),r.e(23).then(function(n){return function(){var i,u,a;return i=r("L2E8"),u=o.request("db:"+e+":get",t.id),console.log("model is",u),t.model=u,a=u.fetch(),a.done(function(){var e;return console.log("fetched model is",u),e=new i(t),n.layout.showChildView("content",e)}),a.fail(function(){return s.request("danger","Failed to load author "+id)})}}(this).bind(null,r)).catch(r.oe)},e.prototype.list_models=function(t){var e,n;return e=t.collectionName,this.setup_layout_if_needed(),n=o.request("db:"+e+":collection"),console.log("List "+e,n),t.collection=n,r.e(22).then(function(o){return function(){var i,u,a;return i=r("zMCd"),a=new i(t),u=n.fetch(),u.done(function(){return o.layout.showChildView("content",a)}),u.fail(function(){return s.request("danger","Failed to load "+e+".")})}}(this).bind(null,r)).catch(r.oe)},e.prototype.list_authors=function(){var t;return t={collectionName:"authors",headerText:"***Authors!!!",entryAttribute:"name",bornAttribute:"date_of_birth"},this.list_models(t)},e.prototype.view_author=function(t){var e;return e={id:t,collectionName:"authors",headerText:"Here are some authors",entryAttribute:"name",bornAttribute:"date_of_birth"},this.view_model(e)},e.prototype.list_books=function(){var t;return t={collectionName:"books",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.list_models(t)},e.prototype.view_book=function(t){var e;return e={id:t,collectionName:"books",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.view_model(e)},e.prototype.list_chapters=function(){var t;return t={collectionName:"chapters",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.list_models(t)},e.prototype.view_chapter=function(t){var e;return e={id:t,collectionName:"chapters",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.view_model(e)},e.prototype.list_photos=function(){var t;return t={collectionName:"photos",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.list_models(t)},e.prototype.view_photo=function(t){var e;return e={id:t,collectionName:"photos",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.view_model(e)},e.prototype.list_series=function(){var t;return t={collectionName:"series",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.list_models(t)},e.prototype.view_series=function(t){var e;return e={id:t,collectionName:"series",headerText:"Here are some books",entryAttribute:"title",bornAttribute:"date_published"},this.view_model(e)},e.prototype.list_stores=function(){var t;return t={collectionName:"stores",headerText:"Here are some books",entryAttribute:"name",bornAttribute:"date_published"},this.list_models(t)},e.prototype.view_store=function(t){var e;return e={id:t,collectionName:"stores",headerText:"Here are some books",entryAttribute:"name",bornAttribute:"date_published"},this.view_model(e)},e}(i),t.exports=n},syo2:function(t,e,r){var o,n,i,s,u,a,c,p,l,f,h,d,y,_=function(t,e){function r(){this.constructor=t}for(var o in e)b.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},b={}.hasOwnProperty;a=r("rdLu"),i=r("aGLy"),n=r("JhqC"),n(i,a),y=r("t87q").models,o=i.Radio.channel("fantasy"),c="/api/dev/ep",l="v1",p=c+"/"+l,f=function(t,e){for(e;e.startsWith("/");)e=e.substr(1);return t+"/"+e},u=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.parse=function(t){var e,r;return r=(null!=t?t.data:void 0)||t,this.url=f(c,r.links.self),this.modelType=r.type,this.links=r.links,this.relationships=r.relationships,e=r.attributes,e.id=r.id,r},e.prototype.makeRelation=function(t){var e;return e=this.relationships[t],console.log("REL",e)},e}(i.JsonApiModel),s=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e}(i.JsonApiCollection),d=function(t,e,r,o){var n;return n=new o,t.reply("db:"+e+":collection",function(){return n}),t.reply("db:"+e+":new",function(){return new r}),t.reply("db:"+e+":get",function(t){return new r({id:t})})},h=function(t){var e,r,n;return n=p+"/"+t,r=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.urlRoot=n,e}(u),e=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return _(e,t),e.prototype.url=n,e.prototype.model=r,e}(s),d(o,t,r,e)},y.forEach(function(t){return h(t)}),t.exports={}},t87q:function(t,e){var r;r=["authors","books","chapters","photos","series","stores"],t.exports={models:r}},uMKg:function(t,e,r){var o,n,i,s,u,a,c,p,l=function(t,e){function r(){this.constructor=t}for(var o in e)f.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},f={}.hasOwnProperty;c=r("rdLu"),u=r("y11e"),a=r("agle"),r("syo2"),i=r("lNHU"),r("t87q").models,o="fantasy",s=Backbone.Radio.channel("global"),Backbone.Radio.channel(o),p=function(t,e){var r,n;return r={},r[o+"/"+t]="list_"+t,r[o+"/"+t+"/view/:id"]="view_"+e,n=r,n},n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return l(e,t),e.prototype.Controller=i,e.prototype.Router=u.AppRouter,e.prototype.appRoutes=function(){return c.extend({fantasy:"list_authors"},p("authors","author"),p("books","book"),p("chapters","chapter"),p("photos","photo"),p("series","series"),p("stores","store"))},e.prototype.onBeforeStart=function(){return e.__super__.onBeforeStart.call(this,arguments),s.reply("applet:"+o+":router",function(t){return function(){return t.router}}(this)),s.reply("applet:"+o+":controller",function(t){return function(){return t.router.controller}}(this))},e}(a),t.exports=n},yk0R:function(t,e,r){var o,n,i=function(t,e){function r(){this.constructor=t}for(var o in e)s.call(e,o)&&(t[o]=e[o]);return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t},s={}.hasOwnProperty;r("4kSj"),o=r("y11e"),n=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return i(e,t),e.prototype.attachHtml=function(t){var e;return e=this.slide_speed?this.slide_speed:"fast",this.$el.hide(),this.$el.html(t.el),this.$el.slideDown(e)},e}(o.Region),t.exports=n}});